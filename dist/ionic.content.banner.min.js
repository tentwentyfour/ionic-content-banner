angular.module("jett.ionic.content.banner",["ionic"]),function(n){"use strict";n.module("jett.ionic.content.banner").directive("ionContentBanner",["$interval",function(n){return{restrict:"E",scope:!0,link:function(e,t){var o;e.currentIndex=0,e.text.length>1&&(o=n(function(){e.currentIndex=e.currentIndex<e.text.length-1?e.currentIndex+1:0},e.interval)),e.closeMessage=function(n){e.currentIndex=n-1;const t=(e.payload||[])[n];e.text.splice(n,1),e.payload&&e.payload.splice(n,1),e.text.length||e.close(),e.onClose(t)},e.$on("$destroy",function(){t.remove(),o&&n.cancel(o)})},template:'<a class="content-banner-text-wrapper" ng-click="onClick()"><div ng-repeat="item in text track by $index" ng-class="{active: $index === currentIndex}" class="content-banner-text" ng-bind="item"></div></a><button class="content-banner-close button button-icon icon {{::icon}}" ng-click="closeMessage(currentIndex)"></button>'}}])}(angular),function(n,e){"use strict";n.module("jett.ionic.content.banner").factory("$ionicContentBanner",["$document","$rootScope","$compile","$timeout","$ionicPlatform","$log",function(t,o,c,i,r,a){function s(n){p[f]=n,n.bannerCacheIndex=f,f++}function l(){i(function(){n.forEach(p,function(n){n.close()})})}function u(a){var l=o.$new(!0);n.extend(l,{icon:"ion-ios-close-empty",transition:"vertical",interval:7e3,type:"info",payload:null,$deregisterBackButton:n.noop,onClose:n.noop,onClick:n.noop,closeOnStateChange:!0,autoClose:null,position:null},a);var u="content-banner-transition-"+l.transition,d="content-banner "+l.type;"bottom"===l.position&&(d+=" content-banner-bottom","vertical"===l.transition&&(u+="-bottom")),d+=" "+u;var f=l.element=c('<ion-content-banner class="'+d+'"></ion-content-banner>')(l),b=l.closeOnStateChange?o.$on("$stateChangeSuccess",function(){l.close()}):n.noop;return l.$deregisterBackButton=r.registerBackButtonAction(function(){i(l.close)},300),l.close=function(){l.removed||(l.removed=!0,e.requestAnimationFrame(function(){f.removeClass("content-banner-in"),i(function(){l.$destroy(),f.remove(),b=null},400)}),delete p[l.bannerCacheIndex],l.$deregisterBackButton(),b())},l.show=function(){l.removed||(t[0].body.appendChild(f[0]),e.requestAnimationFrame(function(){i(function(){f.addClass("content-banner-in"),l.autoClose&&i(function(){l.close()},l.autoClose,!1)},20)}))},i(function(){l.show()},30,!1),l.close.$scope=l,s(l),l.close}var d,f=0,p={},b=function(e,t){n.isString(t)&&(t={type:t});var o=n.extend({text:[e],position:"bottom",autoClose:3e3,icon:""},t);return n.isDefined(d)&&d(),d=u(o)};return{show:u,quick:b,closeAll:l}}])}(angular,ionic);